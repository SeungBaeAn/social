<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-form/iron-form.html">
<link rel="import" href="/src/components/common/normal-input.html" />

<dom-module id="social-main-kpi"> 
 <template>
 
			<form is="iron-form" id="loginForm" name="loginForm" action="/api/auth/login" method="post" on-iron-form-response="_formResponse"
                    on-iron-form-error="_formError"> 
               <input type="hidden" name="userId" value="self"> 
               <input type="hidden" name="password" value="1"> 
            </form>

 	</template>
        <script>
                Polymer({
                        is: 'social-main-kpi',
          attached: function() {
                document.getElementById('loginForm').submit();
            },
			_formError: function(e) {
				console.log(e.detail);
		//		this.$.alert.classList.remove('hidden');
			},

			_formResponse: function(e) {
				var info = e.detail.response;
				sessionStorage.setItem('userId', info.userId);
				sessionStorage.setItem('userName', info.userName);
				sessionStorage.setItem('email', info.email);
				sessionStorage.setItem('corpSeq', info.corpSeq);

				location.href = '/app/social-self/form/';
			}
                });
        </script>
</dom-module> 


