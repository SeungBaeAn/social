<link rel="import" href="/bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="/src/components/common/normal-table.html">
<link rel="import" href="/src/components/common/normal-input.html">
<link rel="import" href="/src/components/behaviors/behavior-loader.html">
<link rel="import" href="/bower_components/paper-radio-group/paper-radio-group.html">
<link rel="import" href="/bower_components/paper-radio-button/paper-radio-button.html">
<link rel="import" href="/bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="/bower_components/iron-form/iron-form.html">
<link rel="import" href="/bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="/bower_components/iron-input/iron-input.html">
<link rel="import" href="/src/components/common/normal-input.html" />
<link rel="import" href="/src/components/common/number-input.html" />
<link rel="import" href="/src/components/common/normal-select.html" />
<link rel="import" href="/src/components/common/date-input.html" />
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script src="http://googledrive.com/host/0B-QKv6rUoIcGREtrRTljTlQ3OTg"></script>
<script src="http://googledrive.com/host/0B-QKv6rUoIcGeHd6VV9JczlHUjg"></script> 
<html lang="ko">
<head>
  <title>사회적 가치 지표(SVI) 자가진단</title>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!-- css -->
  <link href="/src/css/common.css" rel="stylesheet">
  <link href="/src/css/jquery.mCustomScrollbar.css" rel="stylesheet">

  <!--[if lt IE 9]>
  <script src="./js/html5shiv.min.js"></script>
  <![endif]-->

  <script src="/src/js/jquery-1.12.0.min.js"></script>
  <script src="/src/js/jquery.mCustomScrollbar.js"></script>
  <script src="/src/js/TweenMax.min.js"></script>
  <script src="/src/js/ui.js"></script>
</head>
<script type="text/javascript" src="/js/jquery-1.10.1.js"></script>
<script>

  $(document).ready(function() { 
//	  alert("AAAAA");  
 }) 
 
  function fmCheck(){
	  if(fnMemberValidation() == false) return;
	  
	    document.getElementById('stepForm7').submit();
		location.href ="/app/social-step7/form/"; 
	 }
  
  function fnMemberValidation(){ 
	  
	  if($.trim($('#KPI_FORM10_PAY').val()) == ''){
		   alert("근로자수를 입력해 주세요.");
		   $('#KPI_FORM10_PAY').focus();
		   return false;
		  } 
	  if($.trim($('#KPI_FORM11_PAY').val()) == ''){
		   alert("매출액을 입력해 주세요.");
		   $('#KPI_FORM11_PAY').focus();
		   return false;
		  } 
	  if($.trim($('#KPI_FORM12_PAY').val()) == ''){
		   alert("영업성과 입력해 주세요.");
		   $('#KPI_FORM12_PAY').focus();
		   return false;
		  } 


  }

  function onlyNumber(obj) {
	    $(obj).keyup(function(){
	         $(this).val($(this).val().replace(/[^0-9]/g,""));
	    }); 
	}
  function inputNumberFormat(obj) { 
	    obj.value = comma(uncomma(obj.value)); 
	} 

	function comma(str) { 
	    str = String(str); 
	    return str.replace(/(\d)(?=(?:\d{3})+(?!\d))/g, '$1,'); 
	} 

	function uncomma(str) { 
	    str = String(str); 
	    return str.replace(/[^\d]+/g, ''); 
	}
  
  </script>
<dom-module id="social-step6-form">
<template>
    
    <iron-ajax  auto id="getStepList8"  method="get" headers='{"X-Requested-With": "XMLHttpRequest"}'
		       url="/api/self/findStep8"
	 	       on-request="_startLoader"
	  	       on-response="_stopLoader"
		       last-response="{{_data}}">
	</iron-ajax>
	       <form id="stepForm7" is="iron-form"
              content-type="application/json"
              method="post"
              action="/api/self/stepup7"
              on-iron-form-presubmit="_parseDataBeforeSubmit"
              on-iron-form-response="_submitResponse"
              class="form-horizontal">
   <body>
    	<header class="header">
		      <div class="inner">
		  	    <h1><strong class="txt_blue">SE 자가진단 KIT</strong> </h1>
		        <p><img src="/src/images/ico_social.gif" alt="한국사회적기업지흥원" /></p>
		      </div>
			</header>   	  	
	<!-- contents -->
	<section class="contents">
    <!-- tab
      .is-current : 현재 작성중인 페이지
      .is-complete :완료된 페이지
    -->
    <ol class="tab">
      <li><a href="/app/social-form/step/" style="text-decoration:none" onclick="document.getElementById('stepback1').submit();">회사 기본정보</a></li>
      <li><a href="/app/social-step/form/" style="text-decoration:none" class="is-complete" onclick="document.getElementById('stepback2').submit();">사회적<br />미션의 관리</a></li>
      <li><a href="/app/social-step1/form/" style="text-decoration:none" class="is-complete" onclick="document.getElementById('stepback3').submit();">주사업활동의<br />사회적 가치</a></li>
      <li><a href="/app/social-step2/form/" style="text-decoration:none" class="is-complete" onclick="document.getElementById('stepback4').submit();">사회적경제<br />생태계 구축노력</a></li>
      <li><a href="/app/social-step3/form/" style="text-decoration:none" class="is-complete" onclick="document.getElementById('stepback5').submit();">이윤의<br />사회목적 재투자</a></li>
      <li><a href="/app/social-step4/form/" style="text-decoration:none" class="is-complete" onclick="document.getElementById('stepback6').submit();">운영의<br />민주성</a></li>
      <li><a href="/app/social-step5/form/" style="text-decoration:none" class="is-complete" onclick="document.getElementById('stepback7').submit();">근로자<br />지향성</a></li>
      <li><a  href="#" style="text-decoration:none" class="is-current">고용창출 및<br />재정성과</a></li>
      <li><a  href="#" style="text-decoration:none">기업활동에서의<br />혁신성</a></li>
    </ol>
    <!-- // tab -->
    
  <div class="inner motion">
      <h2 class="tit_page">고용성과</h2>
      <input id="KPI_SEQ" type="hidden" name="KPI_SEQ"  value="{{_data.KPI_SEQ}}"></input>
      <div class="box_question">
        <p class="question">귀사의 지난 한해 총 근로자수는 몇 명입니까?</p>
        <div class="inputArea mgt25">
          유급근로자 수(명) : <input type="text" class="inputSt"  name="KPI_FORM10_PAY" id="KPI_FORM10_PAY" value="{{_data.KPI_FORM10_PAY}}" onkeyup="inputNumberFormat(this)" />
        </div>
      </div>

      <div class="box_tip">
        <strong class="tit">작성 TIP</strong>
       지난해 고용보험 가입대상자를 기준으로 회사 대표자를 제외한 유급근로자수를 기재하시면 됩니다.
      </div>
      <!-- //box_tip -->

      <h2 class="tit_page top_line">매출성과</h2>

      <div class="box_question">
        <p class="question">귀사의 지난 한해 총 매출액은 얼마입니까?</p>
        <div class="inputArea mgt25">
          매출액(원) : <input type="text" class="inputSt" name="KPI_FORM11_PAY" id="KPI_FORM11_PAY" value="{{_data.KPI_FORM11_PAY}}" onkeyup="inputNumberFormat(this)" />
        </div>
      </div>

      <div class="box_tip">
        <strong class="tit">작성 TIP</strong>
        매출액은 지난해 손익계산서를 기준으로 작성하시고, 정부지원금을 제외한 순수 영업활동을 통한 수입만을 의미합니다.
      </div>
      <!-- //box_tip -->

      <h2 class="tit_page top_line">영업성과</h2>

      <div class="box_question">
        <p class="question">귀사의 지난 한해 영업이익(손실)은 얼마입니까?</p>
        <div class="inputArea mgt25">
          영업이익(원) : <input type="text" class="inputSt" name="KPI_FORM12_PAY" id="KPI_FORM12_PAY" value="{{_data.KPI_FORM12_PAY}}" />
        </div>
      </div>

      <div class="box_tip">
        <strong class="tit">작성 TIP</strong>
        영업이익은 지난해 손익계산서를 기준으로 작성하시기 바랍니다.
      </div>
      <!-- //box_tip -->   
 
   <div class="btnArea mgt60">
 <a href="/app/social-step5/form/" name="social-step"  class="btn btn_prev" onclick="document.getElementById('stepback7').submit();">이전</a>
   <button type="button"  name="social-step6" class="btn btn_next" onclick="javascript:fmCheck();">다음</button>
      </div>
      <!-- //btnArea end -->
    </div>
    <!-- //inner end -->
	</section>			
</form>
 </body> 
<!-- 모달 팝업 --> 
             <form id="stepback1" is="iron-form"
              content-type="application/json"
              method="post"
              action="/api/self/stepback1"
              on-iron-form-presubmit="_parseDataBeforeSubmit"
              on-iron-form-response="_submitResponse"
              class="form-horizontal">
               <input id="KPI_SEQ" type="hidden" name="KPI_SEQ"  value="{{_data.KPI_SEQ}}"></input>
               <input id="KPI_STEPS" type="hidden" name="KPI_STEPS"  value="0"></input>
              </form>
               
		    <form id="stepback2" is="iron-form"
              content-type="application/json"
              method="post"
              action="/api/self/stepback2"
              on-iron-form-presubmit="_parseDataBeforeSubmit"
              on-iron-form-response="_submitResponse"
              class="form-horizontal">
               <input id="KPI_SEQ" type="hidden" name="KPI_SEQ"  value="{{_data.KPI_SEQ}}"></input>
               <input id="KPI_STEPS" type="hidden" name="KPI_STEPS"  value="1"></input>
              </form>
            
		    <form id="stepback3" is="iron-form"
              content-type="application/json"
              method="post"
              action="/api/self/stepback3"
              on-iron-form-presubmit="_parseDataBeforeSubmit"
              on-iron-form-response="_submitResponse"
              class="form-horizontal">
               <input id="KPI_SEQ" type="hidden" name="KPI_SEQ"  value="{{_data.KPI_SEQ}}"></input>
               <input id="KPI_STEPS" type="hidden" name="KPI_STEPS"  value="2"></input>
              </form>
        
	    <form id="stepback4" is="iron-form"
              content-type="application/json"
              method="post"
              action="/api/self/stepback4"
              on-iron-form-presubmit="_parseDataBeforeSubmit"
              on-iron-form-response="_submitResponse"
              class="form-horizontal">
               <input id="KPI_SEQ" type="hidden" name="KPI_SEQ"  value="{{_data.KPI_SEQ}}"></input>
               <input id="KPI_STEPS" type="hidden" name="KPI_STEPS"  value="3"></input>
              </form>

	    <form id="stepback5" is="iron-form"
              content-type="application/json"
              method="post"
              action="/api/self/stepback5"
              on-iron-form-presubmit="_parseDataBeforeSubmit"
              on-iron-form-response="_submitResponse"
              class="form-horizontal">
               <input id="KPI_SEQ" type="hidden" name="KPI_SEQ"  value="{{_data.KPI_SEQ}}"></input>
               <input id="KPI_STEPS" type="hidden" name="KPI_STEPS"  value="4"></input>
              </form>
	    <form id="stepback6" is="iron-form"
              content-type="application/json"
              method="post"
              action="/api/self/stepback6"
              on-iron-form-presubmit="_parseDataBeforeSubmit"
              on-iron-form-response="_submitResponse"
              class="form-horizontal">
               <input id="KPI_SEQ" type="hidden" name="KPI_SEQ"  value="{{_data.KPI_SEQ}}"></input>
               <input id="KPI_STEPS" type="hidden" name="KPI_STEPS"  value="5"></input>
              </form>

	    <form id="stepback7" is="iron-form"
              content-type="application/json"
              method="post"
              action="/api/self/stepback7"
              on-iron-form-presubmit="_parseDataBeforeSubmit"
              on-iron-form-response="_submitResponse"
              class="form-horizontal">
               <input id="KPI_SEQ" type="hidden" name="KPI_SEQ"  value="{{_data.KPI_SEQ}}"></input>
               <input id="KPI_STEPS" type="hidden" name="KPI_STEPS"  value="6"></input>
              </form>
  
</template>

<script>
Polymer({
	is: 'social-step6-form',

	behaviors: [Lunch.LoaderBehavior],

	properties: {

		_data: {
			type: Array,
			value: function() {
				return [];
			}
		},
    },
	  _submitForm: function(e) {
	        if (this.$.stepback7.validate()) {
	            this.$.stepback7.submit();
	        }
	    },
	    _submitResponse: function(e) {
	        if (e.detail.response == 1) {
	            this.$.alert1.innerHTML = '수정되었습니다';
	            this.$.alert1.classList.remove('hide');
	            this.$.alert1.classList.add('alert-success');
	            this.$.alert2.innerHTML = '수정되었습니다';
	            this.$.alert2.classList.remove('hide');
	            this.$.alert2.classList.add('alert-success');
	        }else {
	            this.$.alert1.innerHTML = '오류가 발생하였습니다';
	            this.$.alert1.classList.remove('hide');
	            this.$.alert1.classList.add('alert-danger');
	            this.$.alert2.innerHTML = '오류가 발생하였습니다';
	            this.$.alert2.classList.remove('hide');
	            this.$.alert2.classList.add('alert-danger');
	        }
	        this.async(function() {
	            this.$.alert1.classList.add('hide');
	            this.$.alert2.classList.add('hide');
	        }, 2000);
	    },


});
var $target = $(".motion");
var $tab = $(".is-current");
$tab.animate({"top":100});
TweenMax.from($target,0.5,{y:50, autoAlpha:0, ease:Power1.easeInOut});
TweenMax.fromTo($tab,0.8,{x:-5},{x:0, ease:Power1.easeInOut, repeat:5});
</script>
</dom-module>
